@model List<TicketService.Ticket>

@{
    ViewBag.Title = "Index";
}

@if (ViewBag.Error == true)
{
    <div>An error has occured.</div>
}
else
{


    if (!String.IsNullOrWhiteSpace(ViewBag.Plate))
    {
    <div>
        Plate: @ViewBag.Plate
        State: @ViewBag.State
        @if (Model.Count() == 0)
        {
            <strong>Congrats! No tickets!</strong>
        }
        else
        {
            <table>
                <thead>
                    <tr>
                        <th>Citation Number</th>
                        <th>Issue Date</th>
                        <th>Violation Code</th>
                        <th>Violation</th>
                        <th>Amount</th>
                    </tr>
                </thead>
                @foreach (TicketService.Ticket ticket in Model)
                {
                    <tr>
                        <td>@ticket.CitationNumber</td>
                        <td>@ticket.IssueDate.ToShortDateString()</td>
                        <td>@ticket.ViolationCode</td>
                        <td>@ticket.Violation</td>
                        <td>@ticket.Amount.ToString()</td>
                    </tr>


                }
            </table>
            if( !String.IsNullOrWhiteSpace(ViewBag.Email ) )
            {
                <div>an email has been sent to @ViewBag.Email</div>   
            }
        
        }


    </div>


    }
    else
    {
    <div>The correct URL syntax is /CA/PLATENO</div>

    }

}